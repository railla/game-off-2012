<!DOCTYPE html>
<html>
    <style>
        .error {border: 1px red solid;}
        .main-table {width: 100%; vertical-align: top; text-align: center;}
    </style>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>
        var GF = {fighters: {}};
        $(document).ready(function() {
            var query = function(url, callback) {
                $.ajax('https://api.github.com' + url, {
                    dataType: 'jsonp',
                    success: function(data) {
                        return callback(data.data);
                    }
                });
            };

            $('.f-selector').bind('blur', function(event) {
                var input = $(this).val();
                if (!input.match(/^\w+\/\w+$/)) {
                    $(this).addClass('error');
                    return false;
                } else {
                    $(this).removeClass('error');
                }
                var that = this;
                query('/repos/' + input, function(data) {
                    if (data.message) {
                        $(that).addClass('error');
                        GF.fighters[event.target.id] = undefined;
                        $('#fight').attr('disabled', 'disabled');
                    } else {
                        $(that).removeClass('error');
                        GF.fighters[event.target.id] = data;
                        if (GF.fighters.f1 && GF.fighters.f2) {
                            if (GF.fighters.f1.full_name == GF.fighters.f2.full_name) {
                                $('#fight').attr('disabled', 'disabled');
                                return false;
                            }
                            $('#fight').removeAttr('disabled');
                        }
                    }
                });
            });
            $('#fight').bind('click', function() {
                $(this).attr('disabled', 'disabled');
                alert('let the mortal combat begin');
            });
        });
    </script>
    <body>
        <table class="main-table">
            <tbody>
                <tr>
                    <td>
                        <input id="f1" class="f-selector" />
                    </td>
                    <td >
                        VS<br/>
                        <button id="fight" disabled="disabled">fight</button>
                    </td>
                    <td>
                        <input id="f2" class="f-selector" />
                    </td>
                </tr>
            </tbody>
        </table>
    </body>
</html>
